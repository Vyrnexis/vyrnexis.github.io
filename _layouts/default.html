<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{{ page.title | default: "Vyrnexis" }}</title>
  <meta name="description" content="{{ site.title | default: 'Vyrnexis' }}" />
  <meta name="author" content="{{ site.author | default: 'Vyrnexis' }}" />
  <link rel="icon" href="{{ '/favicon.ico' | relative_url }}" sizes="16x16 32x32" />
  <link rel="icon" href="{{ '/assets/logo-vyrnexis.svg' | relative_url }}" type="image/svg+xml" />

  <style>
    :root{
      --bg:#050506;
      --panel:#0c0c0e;
      --muted:#8a8c90;
      --text:#dfe6ee;
      --accent:#00e6ff;
      --accent-2:#8a5cff;
      --glass: rgba(255,255,255,0.04);
      --card-shadow: 0 10px 30px rgba(0,0,0,0.55);
      --border: 1px solid rgba(255,255,255,0.04);
      --mono: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }

    *{box-sizing:border-box;}

    html{
      overflow-y:scroll; /* keep scrollbar space consistent across pages */
      min-height:100%;
    }

    body{
      min-height:100vh;
      margin:0;
      background:radial-gradient(circle at 20% 20%, rgba(0,230,255,0.05), transparent 35%),
                 radial-gradient(circle at 80% 0%, rgba(138,92,255,0.05), transparent 30%),
                 linear-gradient(180deg,var(--bg),#040405);
      color:var(--text);
      font-family:var(--mono);
      scroll-behavior:smooth;
      overflow-y:auto;
    }

    a{color:inherit;}

    .page-shell{
      max-width:1080px;
      margin:36px auto;
      padding:28px;
    }

    .site-header{
      display:flex;
      align-items:center;
      gap:18px;
    }

    .logo-tile{
      width:76px;
      height:76px;
      border-radius:14px;
      background:linear-gradient(180deg,rgba(255,255,255,0.04),rgba(255,255,255,0.02));
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:var(--card-shadow);
      overflow:hidden;
    }

    .logo-tile img{
      width:64px;
      height:64px;
      display:block;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:4px;
    }

    .brand h1{
      margin:0;
      font-size:20px;
      letter-spacing:4px;
    }

    .brand p{
      margin:0;
      font-size:12px;
      color:var(--muted);
    }

    .nav{
      margin-left:auto;
      display:flex;
      gap:10px;
      align-items:center;
    }

    .btn{
      border:var(--border);
      padding:8px 12px;
      border-radius:10px;
      background:transparent;
      color:var(--muted);
      font-size:13px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      transition:background 0.15s ease,border-color 0.15s ease,color 0.15s ease;
    }

    .btn:hover{
      border-color:rgba(255,255,255,0.12);
      color:var(--text);
    }

    .btn.primary{
      background:linear-gradient(90deg,rgba(0,230,255,0.12),rgba(138,92,255,0.08));
      border:1px solid rgba(0,230,255,0.2);
      color:var(--text);
    }

    .divider{
      height:2px;
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      border-radius:2px;
      margin:16px 0 20px;
    }

    .layout{
      display:grid;
      grid-template-columns:minmax(0,1fr) 320px;
      gap:22px;
    }

    .content{
      min-width:0;
    }

    .anchor-target{
      scroll-margin-top:48px;
    }

    .post{
      background:linear-gradient(180deg,var(--panel),#0a0a0c);
      padding:18px;
      border-radius:14px;
      border:var(--border);
      box-shadow:var(--card-shadow);
      margin-bottom:18px;
    }

    .post h1,
    .post h2{
      margin:0 0 8px;
    }

    .meta{
      color:var(--muted);
      font-size:13px;
      margin-bottom:12px;
    }

    .excerpt{
      color:var(--text);
      line-height:1.55;
    }

    .post-content{
      color:var(--text);
      line-height:1.6;
      font-size:15px;
    }

    .post-content h2,
    .post-content h3{
      margin-top:18px;
      margin-bottom:6px;
    }

    .post-content img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    .post-topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:12px;
    }

    .title-block{
      flex:1 1 auto;
      min-width:0;
    }

    .readmore{
      display:inline-flex;
      margin-top:14px;
      padding:8px 12px;
      border-radius:10px;
      background:rgba(0,230,255,0.08);
      border:1px solid rgba(0,230,255,0.2);
      color:var(--accent);
      text-decoration:none;
      font-weight:600;
      transition:transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
    }

    .readmore:hover{
      transform:translateY(-1px);
      background:rgba(0,230,255,0.12);
      border-color:rgba(0,230,255,0.32);
    }

    .back-link{
      gap:6px;
      white-space:nowrap;
      margin-top:0;
      background:rgba(0,230,255,0.08);
      border:1px solid rgba(0,230,255,0.2);
      color:var(--accent);
      text-decoration:none;
      font-weight:600;
      transition:transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
    }

    .back-link:hover{
      transform:translateY(-1px);
      background:rgba(0,230,255,0.12);
      border-color:rgba(0,230,255,0.32);
    }

    aside{
      position:relative;
    }

    .card{
      background:var(--panel);
      padding:16px;
      border-radius:14px;
      border:var(--border);
      box-shadow:var(--card-shadow);
      margin-bottom:14px;
    }

    .card h4{
      margin:0 0 8px;
    }

    .about-card h3{
      margin:6px 0 0;
      text-align:center;
    }

    .about-card p{
      margin:6px 0 0;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }

    .avatar{
      width:96px;
      height:96px;
      border-radius:999px;
      background:linear-gradient(135deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));
      display:flex;
      align-items:center;
      justify-content:center;
      margin:0 auto 12px;
      position:relative;
      overflow:hidden;
    }

    .avatar img{
      width:84px;
      height:84px;
      display:block;
    }

    .link-list{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .icon-link{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius:10px;
      border:var(--border);
      text-decoration:none;
      color:var(--text);
      background:rgba(255,255,255,0.02);
      transition:background 0.12s ease, border-color 0.12s ease, transform 0.12s ease;
    }

    .icon-link:hover{
      background:rgba(255,255,255,0.04);
      border-color:rgba(255,255,255,0.12);
      transform:translateY(-1px);
    }

    .icon{
      width:18px;
      height:18px;
      display:inline-block;
      flex-shrink:0;
    }

    .icon img{
      width:18px;
      height:18px;
      display:block;
    }

    footer{
      margin-top:36px;
      color:var(--muted);
      font-size:13px;
      text-align:center;
    }

    pre, code{
      font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:13px;
    }

    pre{
      background:#0c0f14;
      padding:12px;
      border-radius:12px;
      overflow-x:auto;
      border:1px solid rgba(255,255,255,0.06);
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.03);
    }

    /* Rouge / code highlighting */
    code {
      background:rgba(255,255,255,0.05);
      padding:1px 4px;
      border-radius:6px;
      border:1px solid rgba(255,255,255,0.05);
    }

    pre code {
      background:transparent;
      padding:0;
      border:none;
    }

    .highlight { background:#0c0f14; }
    .highlight .c { color:#7a8696; font-style:italic; } /* Comment */
    .highlight .err { color:#ff6b6b; } /* Error */
    .highlight .k { color:#7dd3fc; } /* Keyword */
    .highlight .o { color:#cbd5e1; } /* Operator */
    .highlight .cm { color:#7a8696; font-style:italic; } /* Comment.Multiline */
    .highlight .cp { color:#9ca3af; } /* Comment.Preproc */
    .highlight .c1 { color:#7a8696; font-style:italic; } /* Comment.Single */
    .highlight .cs { color:#7a8696; font-style:italic; } /* Comment.Special */
    .highlight .gd { color:#fca5a5; background:rgba(255,0,0,0.05); } /* Generic.Deleted */
    .highlight .ge { font-style:italic; }
    .highlight .gh { color:#e5e7eb; } /* Heading */
    .highlight .gi { color:#86efac; background:rgba(0,255,0,0.05); } /* Generic.Inserted */
    .highlight .gp { color:#9ca3af; } /* Prompt */
    .highlight .gs { font-weight:600; }
    .highlight .gu { color:#9ca3af; } /* Subheading */
    .highlight .kc { color:#7dd3fc; } /* Keyword.Constant */
    .highlight .kd { color:#7dd3fc; } /* Keyword.Declaration */
    .highlight .kn { color:#7dd3fc; } /* Keyword.Namespace */
    .highlight .kp { color:#7dd3fc; } /* Keyword.Pseudo */
    .highlight .kr { color:#7dd3fc; } /* Keyword.Reserved */
    .highlight .kt { color:#a5b4fc; } /* Keyword.Type */
    .highlight .m { color:#f9a8d4; } /* Number */
    .highlight .s { color:#e7c37a; } /* String */
    .highlight .na { color:#a5b4fc; } /* Name.Attribute */
    .highlight .nb { color:#cbd5e1; } /* Name.Builtin */
    .highlight .nc { color:#a5b4fc; } /* Name.Class */
    .highlight .no { color:#fca5a5; } /* Name.Constant */
    .highlight .nd { color:#a5b4fc; } /* Name.Decorator */
    .highlight .ni { color:#cbd5e1; } /* Name.Entity */
    .highlight .ne { color:#fca5a5; } /* Name.Exception */
    .highlight .nf { color:#a5b4fc; } /* Name.Function */
    .highlight .nl { color:#cbd5e1; } /* Name.Label */
    .highlight .nn { color:#cbd5e1; } /* Name.Namespace */
    .highlight .nx { color:#cbd5e1; } /* Name.Other */
    .highlight .py { color:#cbd5e1; } /* Name.Property */
    .highlight .nt { color:#7dd3fc; } /* Name.Tag */
    .highlight .nv { color:#cbd5e1; } /* Name.Variable */
    .highlight .ow { color:#7dd3fc; } /* Operator.Word */
    .highlight .w { color:#94a3b8; } /* Text.Whitespace */
    .highlight .mf { color:#f9a8d4; } /* Literal.Number.Float */
    .highlight .mh { color:#f9a8d4; } /* Literal.Number.Hex */
    .highlight .mi { color:#f9a8d4; } /* Literal.Number.Integer */
    .highlight .mo { color:#f9a8d4; } /* Literal.Number.Oct */
    .highlight .sb { color:#e7c37a; } /* Literal.String.Backtick */
    .highlight .sc { color:#e7c37a; } /* Literal.String.Char */
    .highlight .sd { color:#e7c37a; } /* Literal.String.Doc */
    .highlight .s2 { color:#e7c37a; } /* Literal.String.Double */
    .highlight .se { color:#fca5a5; } /* Literal.String.Escape */
    .highlight .sh { color:#e7c37a; } /* Literal.String.Heredoc */
    .highlight .si { color:#e7c37a; } /* Literal.String.Interpol */
    .highlight .sx { color:#e7c37a; } /* Literal.String.Other */
    .highlight .sr { color:#e7c37a; } /* Literal.String.Regex */
    .highlight .s1 { color:#e7c37a; } /* Literal.String.Single */
    .highlight .ss { color:#e7c37a; } /* Literal.String.Symbol */
    .highlight .bp { color:#cbd5e1; } /* Builtin.Pseudo */
    .highlight .vc { color:#cbd5e1; } /* Name.Variable.Class */
    .highlight .vg { color:#cbd5e1; } /* Name.Variable.Global */
    .highlight .vi { color:#cbd5e1; } /* Name.Variable.Instance */
    .highlight .il { color:#f9a8d4; } /* Literal.Number.Integer.Long */

    @media(max-width:960px){
      .page-shell{padding:20px;}
      .layout{grid-template-columns:1fr;}
      .nav{display:none;}
    }
  </style>
</head>
<body>
  <div class="page-shell">
    <header class="site-header">
      <div class="logo-tile" aria-hidden="true">
        <img src="{{ '/assets/logo-vyrnexis.svg' | relative_url }}" alt="Vyrnexis logo">
      </div>

      <div class="brand">
        <h1>{{ site.brand_name | default: site.title | default: "Vyrnexis" }}</h1>
        <p>{{ site.brand_subtitle | default: "Powered by caffeine and semicolons" }}</p>
      </div>

      <nav class="nav" aria-label="Primary">
        <a class="btn" href="{{ '/about/' | relative_url }}">About</a>
        <a class="btn" href="{{ '/' | relative_url }}#posts">Posts</a>
        <button class="btn primary" type="button" onclick="toggleAccent()">Toggle Accent</button>
      </nav>
    </header>

    <div class="divider"></div>

    <main class="layout">
      <section id="posts" class="content anchor-target" aria-label="Posts">
        {% if page.collection == "posts" %}
          <article class="post">
            <div class="post-topbar">
              <div class="title-block">
                <h1>{{ page.title }}</h1>
                <div class="meta">
                  {{ page.date | date: "%b %-d, %Y" }}
                  {% if page.author %} • by {{ page.author }}{% endif %}
                </div>
              </div>
              <a class="readmore back-link" href="{{ '/' | relative_url }}">← Back to posts</a>
            </div>

            <div class="post-content">
              {{ content }}
            </div>
          </article>
        {% else %}
          {{ content }}
        {% endif %}
      </section>

      <aside class="sidebar">
        <div class="card anchor-target about-card" id="about">
          <div class="avatar" title="Vyrnexis avatar">
            <img src="{{ '/assets/avatar-vyrnexis-400.svg' | relative_url }}" alt="Vyrnexis avatar">
          </div>
          <h3>{{ site.sidebar_handle | default: "@Vyrnexis" }}</h3>
          <p>{{ site.sidebar_subtext | default: "Dark mode is a lifestyle" }}</p>
        </div>

        <div class="card">
          <h4>Quick links</h4>
          <div class="link-list">
            {% assign links = site.data.links %}
            {% for link in links %}
              <a class="icon-link" href="{{ link.url }}" {% if link.url contains 'http' %}target="_blank" rel="noreferrer"{% endif %}>
                <span class="icon" aria-hidden="true">
                  <img src="{{ link.icon | relative_url }}" alt="">
                </span>
                <span>{{ link.label }}</span>
              </a>
            {% endfor %}
          </div>
        </div>
      </aside>
    </main>

    <footer>
    <strong>Vyrnexis</strong> • MIT • 2025
    </footer>
  </div>

  <script>
    // Accent theme persistence
    const ACCENT_KEY = 'vyrnexis-accent';
    const ACCENT_DEFAULT = {accent:'#00e6ff', accent2:'#8a5cff'};
    const ACCENT_PURPLE = {accent:'#8a5cff', accent2:'#ff4aa3'};
    let accentMode = null;

    function applyAccent(mode){
      const palette = mode === 'purple' ? ACCENT_PURPLE : ACCENT_DEFAULT;
      document.documentElement.style.setProperty('--accent', palette.accent);
      document.documentElement.style.setProperty('--accent-2', palette.accent2);
      accentMode = mode === 'purple' ? 'purple' : 'default';
    }

    (function restoreAccent(){
      try{
        const stored = localStorage.getItem(ACCENT_KEY);
        applyAccent(stored === 'purple' ? 'purple' : 'default');
      } catch(e){
        applyAccent('default');
      }
    })();

    (function(){
      if('scrollRestoration' in history){
        history.scrollRestoration = 'manual';
      }

      const scrollToHash = function(hash){
        if(!hash){ return; }
        const target = document.querySelector(hash);
        if(!target){ return; }
        const top = target.getBoundingClientRect().top + window.scrollY - 20;
        window.scrollTo({top: Math.max(0, top), behavior:'smooth'});
      };

      window.addEventListener('load', function(){
        if(location.hash){
          scrollToHash(location.hash);
        } else {
          window.scrollTo(0, 0);
        }
      });

      document.querySelectorAll('a[href^="#"]').forEach(function(link){
        link.addEventListener('click', function(e){
          const hash = this.getAttribute('href');
          if(!hash || hash === '#'){ return; }
          const target = document.querySelector(hash);
          if(!target){ return; }
          e.preventDefault();
          scrollToHash(hash);
          history.replaceState(null, '', hash);
        });
      });
    })();

    function toggleAccent(){
      const next = accentMode === 'purple' ? 'default' : 'purple';
      applyAccent(next);
      try{ localStorage.setItem(ACCENT_KEY, next); }catch(e){}
    }
  </script>
</body>
</html>
